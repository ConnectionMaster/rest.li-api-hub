@(clusters: List[com.linkedin.restsearch.Cluster], metadata: com.linkedin.data.DataMap)

@import com.linkedin.restsearch.template.utils.Conversions._

@main("go/restli", includeNavSearch = false) {

<div class="row">
  <div class="col-lg-9">
    @freshness(metadata)

    @searchbox("", "REST")

    <br><br>

    @*<div class="alert alert-info">
      Post any news here.
    </div>*@

    <a data-toggle="modal" href="#announcements">Previous announcements</a>
    <div class="modal fade" id="announcements" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
        </div>
      </div><!-- /.modal-content -->
      </div><!-- /.modal-dialog -->
    </div><!-- /.modal -->

    <h2>All Available Resources</h2>

    <div>
      @defining(clusters.filter(_.getName().size > 0).groupBy(_.getName().charAt(0).toUpper)) { groupedClusters =>
        <ul class="pagination pagination-sm">
          @defining('A' to 'Z') { letters =>
            @letters.map { letter =>
              <li @if(!groupedClusters.contains(letter)){class="disabled"}><a href="#@letter">@letter</a></li>
            }
          }
        </ul>

        <ul class="media-list">
          @defining('A' to 'Z') { letters =>
            @letters.map { letter =>
              <section class="api-list" id="@letter">
                @groupedClusters.get(letter).map { clusters =>
                  @if(letter != 'A') {<div class="page-header"></div>}
                  @clusters.map { cluster =>
                    @if(cluster.services(primaryOnly=true).nonEmpty) {
                      <li class="media">
                        <h4 class="media-heading">
                          @defining(cluster.coloVariants(clusters)) { variants =>
                            @if(variants.nonEmpty) {
                          <a href="@routes.Application.cluster(cluster.getName())">@cluster.canonicalColoVariantIdentifier</a>
                              <span class="text-muted">-
                                <ul class="comma-separated">
                                  @variants.map { variant =>
                                  <li><a class="text-muted" href="@routes.Application.cluster(variant.getName())">@variant.coloVariantSuffix</a></li>
                                  }
                                </ul>
                              </span>
                            } else {
                              <a href="@routes.Application.cluster(cluster.getName())">@cluster.getName()</a>
                            }
                          }
                        </h4>
                        @clusterservices(cluster)
                      </li>
                    }
                  }
                }
              </section>
            }
          }
        </ul>

        <ul class="pagination pagination-sm">
          @defining('A' to 'Z') { letters =>
            @letters.map { letter =>
              <li @if(!groupedClusters.contains(letter)){class="disabled"}><a href="#@letter">@letter</a></li>
            }
          }
        </ul>
      }
    </div>
  </div>
</div>

<script type="text/javascript" src="@routes.Assets.at("javascripts/clusterlist.js")"></script>
}